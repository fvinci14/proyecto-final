<!-- Historial -->
<mat-card class="daxa-card mb-25 border-radius bg-white border-none d-block"
    [class.rtl-enabled]="themeService.isRTLEnabled()">
    <div class="row">
        <div class="col-12 mb-4 custom-margin-bottom">
            <h5>Historial Académico</h5>
        </div>
    </div>
    <mat-card-content>
        <div class="historial-table">
            <div class="table-responsive custom-margin-bottom">
                <table mat-table [dataSource]="dataSource" matSort>

                    <!-- Ciclo Lectivo Column -->
                    <ng-container matColumnDef="cicloLectivo">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Ciclo Lectivo</th>
                        <td mat-cell *matCellDef="let element">{{element.cicloLectivo}}</td>
                    </ng-container>

                    <!-- Año Column -->
                    <ng-container matColumnDef="anio">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Año</th>
                        <td mat-cell *matCellDef="let element">{{element.anio}}</td>
                    </ng-container>

                    <!-- Nivel Column -->
                    <ng-container matColumnDef="nivel">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nivel</th>
                        <td mat-cell *matCellDef="let element">{{element.nivel}}</td>
                    </ng-container>

                    <!-- Promedio Column -->
                    <ng-container matColumnDef="promedio">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Promedio</th>
                        <td mat-cell *matCellDef="let element">{{element.promedio}}</td>
                    </ng-container>

                    <!-- Inasistencias Column -->
                    <ng-container matColumnDef="inasistencias">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Inasistencias</th>
                        <td mat-cell *matCellDef="let element">{{element.inasistencias}}</td>
                    </ng-container>

                    <!-- Ver Column -->
                    <ng-container matColumnDef="accion">
                        <th mat-header-cell *matHeaderCellDef>Acción</th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-icon-button (click)="openDialog(element)" matTooltip="Daxa" class="daxa"
                                aria-label="Example icon-button with a heart icon">
                                <mat-icon>visibility</mat-icon>
                            </button>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                </table>
            </div>
            <mat-paginator [pageSizeOptions]="[10, 20, 30]" showFirstLastButtons></mat-paginator>
        </div>
    </mat-card-content>
</mat-card>

<!-- Dialog for viewing detailed record -->
<ng-template #dialogTemplate let-data>
    <mat-dialog-content>
        <mat-card class="daxa-card mb-25 border-radius bg-white border-none d-block"
            [class.rtl-enabled]="themeService.isRTLEnabled()">
            <h2 mat-dialog-title>Historial de {{data.cicloLectivo}}</h2>
            <mat-card-content>
                <div class="table-responsive custom-margin-bottom">
                    <table mat-table [dataSource]="data.detalles">

                        <!-- Materia Column -->
                        <ng-container matColumnDef="materia">
                            <th mat-header-cell *matHeaderCellDef>Materia</th>
                            <td mat-cell *matCellDef="let element">{{element.materia}}</td>
                        </ng-container>

                        <!-- Promedio Column -->
                        <ng-container matColumnDef="promedio">
                            <th mat-header-cell *matHeaderCellDef>Promedio</th>
                            <td mat-cell *matCellDef="let element">{{element.promedio}}</td>
                        </ng-container>

                        <!-- Docente Column -->
                        <ng-container matColumnDef="docente">
                            <th mat-header-cell *matHeaderCellDef>Docente</th>
                            <td mat-cell *matCellDef="let element">{{element.docente}}</td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="['materia', 'promedio', 'docente']"></tr>
                        <tr mat-row *matRowDef="let row; columns: ['materia', 'promedio', 'docente'];"></tr>
                    </table>
                </div>
                <button mat-button matTooltip="Warn" color="warn" (click)="closeDialog()">Cerrar</button>
            </mat-card-content>
        </mat-card>
    </mat-dialog-content>
</ng-template>
